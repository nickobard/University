# Time Tracking Application

(ala Toggl Track)

![](docs/images/track.png)
![sidebar.png](docs/images/sidebar.png)
![](docs/images/analysis.png)
![about.png](docs/images/about.png)
![docs.png](docs/images/docs.png)

Also watch video to see how it works:
[how_the_app_works.webm](docs/how_the_app_works.webm), [how_the_app_works.mp4](docs/how_the_app_works.mp4)



***

## TL;DR ðŸ’¨:

Run using **docker** ðŸ—:

> 1) run `$ docker compose up` ðŸ—
> 2) go fetch some coffee â˜• (not kidding, for the first time building images can take up to 10 minutes)
> 3) after docker compose finishes and runs up containers, go to http://localhost:8000/
> 4) go to **About** page using sidebar or directly open http://localhost:8000/about to see the report.
> 5) enjoy the app âœ¨ (if there are some problems - see **troubleshoots** ðŸ”¥ðŸš’ section of this readme file)
> 6) run `$ docker compose exec app bash`
> 7) run `$ source /venv/bin/activate` to activate virtual environment
> 8) run `$ cd app/app/`
> 9) run `$ ./scripts/run_tests.sh` to run tests. Ignore both warnings about using deprecated features, they are
     irrelevant and are not mistakes.
> 10) run `$ ./scripts/pep8_pylint.sh` to run pylinter. It runs only on project sources without tests.


Run using **conda** ðŸ:

> 1) in the project root run `$ ./scripts/conda_create_or_update_env.sh` to create bipyt-sp environment to run
     application
> 2) run `$ conda activate bipyt-sp` to activate new installed environment
> 3) run `$ docker compose up db` to run postgresql database
> 4) run `$ cd app/app/` and then `$ python -m main` to start application
> 5) go to http://localhost:8000/ and enjoy the app âœ¨
> 6) go to **About** page using sidebar or directly open http://localhost:8000/about to see the report.
> 7) run `$ cd ../` and then `$ ./scripts/run_tests.sh` to run tests. Ignore both warnings about using deprecated
     features, they are irrelevant and are not mistakes.
> 8) run `$ ./scripts/pep8_pylint.sh` to run pylinter. It runs only on project sources without tests.

## Troubleshoots ðŸ”¥ðŸš’:

- Make sure you have internet connection. There are CDN links in the frontend html pages, which download all needed
  JavaScript and CSS files. Without them the app will not work.
- Make sure you run commands from appropriate directory. If you run scripts, run them in the directory where the
  **scripts/** directory lies, not inside the **scripts/** directory.
- If you have problems with **conda**, try to run `$ ./scripts/set_up_conda_channels.sh` in the project root to add
  conda-forge channel to conda. Then try to create conda environment again.
- If you have problems with **docker compose**, be sure you run newer `docker compose` tool instead of
  older `docker-compose`

***

# Brief description:

This is time tracking web application like [Toggl Track](https://toggl.com/), which allows you to track time spent on some tasks, manipulate with them, and get basic statistics on analyze page. 

## Frameworks:

Project mainly uses:
- [FastAPI](https://fastapi.tiangolo.com/) for controllers, 
- [SQLAlchemy](https://www.sqlalchemy.org/) for handling database and ORM, 
- [Pydantic](https://docs.pydantic.dev/) for schemas (aka dto) and configuration, 
- [Bootstrap](https://getbootstrap.com/) for CSS styles, 
- [HyperApp](https://github.com/jorgebucaran/hyperapp) - tiny javascript
framework for interactivity, 
- [Jinja2](https://jinja.palletsprojects.com/en/3.1.x/) template language.


Other used libraries:
- [Pandas](https://pandas.pydata.org/) (and a little bit [numpy](https://numpy.org/)) - for manipulation with time entries data
- [Plotly](https://plotly.com/) - for charts visualisation


## Views:

There are 4 working pages:
- [/track](http://localhost:8000/track) page - where you can start timer and manipulate with all time entries
- [/analysis](http://localhost:8000/analysis) page - where you have two plots about your time entries. BUT! If you have no time entries, plots will not render and page will be empty.
- [/about](http://localhost:8000/about) page - page with the report. There are more details about the project.
- [/docs](http://localhost:8000/docs) page - generated by FastAPI - provides you API of the server.

## API:

You can find server API on [/docs](http://localhost:8000/docs) page, from there you can also try some methods using generated OpenAPI interface.

## Database:

Application uses PostgreSQL database. Planned database scheme is as follows:

![db.png](docs/images/db.png)

But this application is much more simple, and uses only one entity - Time Entries. The presented scheme above can be used for extension of the application.

Current database scheme:

![devdb.png](docs/images/devdb.png)

[data.json](docs/db/data.json) and [model.json](docs/db/model.json) are data used for FIT CTU intranet DBS portal data modeller.

## Report:

Report can be found on [/about](http://localhost:8000/about) page or in the **bardanik.pdf** file in the root directory.

Report contains more details about the project.

## Code Structure:

    excluding: "*pycache*|__init__.py|docs"

```text
.
â”œâ”€â”€ app
â”‚Â Â  â”œâ”€â”€ app
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ api
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ api.py
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ time_entires.py
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ web_sockets.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ core
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ config.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ crud
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ crud_time_entry.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ db
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ base_class.py
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ init_db.py
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ session.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ main.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ time_entry.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ schemas
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ time_entry.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ time_entry_graphs.py
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ time_entry_service.py
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ time_entry_statistics.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ utils
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ helpers.py
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ queries.py
â”‚Â Â  â”‚Â Â  â””â”€â”€ views
â”‚Â Â  â”‚Â Â      â””â”€â”€ views.py
â”‚Â Â  â”œâ”€â”€ app.dockerfile
â”‚Â Â  â”œâ”€â”€ pytest.ini
â”‚Â Â  â”œâ”€â”€ scripts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pep8_pylint.sh
â”‚Â Â  â”‚Â Â  â””â”€â”€ run_tests.sh
â”‚Â Â  â”œâ”€â”€ static
â”‚Â Â  â”‚Â Â  â””â”€â”€ images
â”‚Â Â  â”‚Â Â      â””â”€â”€ img.png
â”‚Â Â  â”œâ”€â”€ templates
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ about.html
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ analysis.html
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ base.html
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ components
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ footer.html
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ graphs.html
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ list.html
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ navbar.html
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ sidebar.html
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ timer.html
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ report
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pages
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ briefing.html
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ realization.html
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ references.html
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ results.html
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ report.html
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ report_base.html
â”‚Â Â  â”‚Â Â  â””â”€â”€ track.html
â”‚Â Â  â””â”€â”€ tests
â”‚Â Â      â”œâ”€â”€ test_api
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ test_api.py
â”‚Â Â      â”‚Â Â  â””â”€â”€ test_time_entries.py
â”‚Â Â      â”œâ”€â”€ test_crud
â”‚Â Â      â”‚Â Â  â””â”€â”€ test_crud_time_entry.py
â”‚Â Â      â”œâ”€â”€ test.db
â”‚Â Â      â””â”€â”€ test_services
â”‚Â Â          â”œâ”€â”€ test_time_entry_service.py
â”‚Â Â          â””â”€â”€ test_time_entry_statistics.py
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ environment.yml
â”œâ”€â”€ README.md
â””â”€â”€ scripts
    â”œâ”€â”€ conda_create_or_update_env.sh
    â”œâ”€â”€ generate_report.py
    â”œâ”€â”€ set_up_conda_channels.sh
    â””â”€â”€ update_environment_file.sh

23 directories, 51 files

```
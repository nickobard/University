### Code Structure:

```text
.
├── composer.json
├── composer.lock
├── data
│   ├── tr1.txt
│   └── tr2.txt
├── docker
│   ├── nginx
│   │   └── default.conf
│   ├── php8.1
│   │   ├── Dockerfile
│   │   ├── php.ini
│   │   └── xdebug.ini
│   └── postgres
│       └── Dockerfile
├── docker-compose.yaml
├── README.md
├── run.php
├── src
│   ├── Db.php
│   └── Model
│       ├── AbstractModel.php
│       ├── Account.php
│       ├── IdentifiableTrait.php
│       ├── ModelInterface.php
│       └── Transaction.php
├── test
│   ├── 100100_0300_2.txt
│   ├── 100100_0710_2.txt
│   ├── 101010_2010_2.txt
│   ├── 111300_0710_1.txt
│   ├── 111300_0710_2.txt
│   ├── 111323_0710_1.txt
│   ├── 111323_0710_2.txt
│   ├── 330330_0800_1.txt
│   ├── 330330_0800_2.txt
│   ├── 330331_0800_1.txt
│   ├── 330331_0800_2.txt
│   └── 330335_0800_2.txt
└── test.sh

```

# Task 6: Bank Transactions

The goal is to create a program that imports bank transactions from files into a database and outputs summaries for individual bank accounts. Database storage ensures data persistence between application runs.

You have a skeleton application prepared and your task is to complete the implementations of specified methods.

## Class `Db`

Contains a single static method `get` that establishes a connection to an SQLite database using PDO.

## Model `Account`

Represents a bank account data model where each instance corresponds to a row in the database table. The `id` attribute is auto-generated by the database and serves as the primary key. Other attributes include `number` (account number) and `code` (bank code).

## Model `Transaction`

Data model for transactions between two bank accounts. The `amount` attribute represents the transferred amount from account `from` to account `to`. In PHP, `from` and `to` are references to `Account` objects; in the database, this relationship is represented using foreign keys. The `id` attribute is auto-generated and serves as the primary key in the database.

## `data` Directory

Contains two files with transactions in the format:

```text
account_number bank_code account_number bank_code amount
```


## Implementations

1. Static methods `Account::createTable`, `Transaction::createTable`, `Account::dropTable`, `Transaction::dropTable` - these methods initialize (reset) the database tables. Use appropriate SQL commands for these operations.

2. Static method `Account::find` - returns (creates) an instance of `Account` for the corresponding row in the database table. Returns `null` if no row is found.

3. Static method `Account::findById` - returns (creates) an instance of `Account` for the corresponding primary key (`id`) from the database table. Returns `null` if no row is found.

4. Static method `Account::findOrCreate` - returns (creates) an instance based on an existing row or a newly inserted one.

5. Instance method `$account->getTransactions` - returns an array of `Transaction` instances related to the account (transactions to/from the account).

6. Instance method `$account->getTransactionSum` - calculates the current balance of the account (sum of transactions as described above) using a database aggregation function. Deducts outgoing transactions and adds incoming ones.

7. Instance method `$transaction->insert` - inserts the current instance data into the database.

Do not modify other files.

## Validation of Implementation

The application is used via the `run.php` script, which accepts command line arguments:
- The `init` command initializes (resets) the database state by dropping and recreating tables.
- The `import <file>` command imports transactions from a specified file.
- The `summary <account_number> <bank_code>` command displays transactions and the balance for the specified account.

You can validate your implementation using the shell script `test.sh`, which compares expected outputs with your implementation outputs. If the program is implemented correctly, the output should show:

```text
== init
== import tr1
== summaries
Files test/111300_0710_1.txt and - are identical
Files test/111323_0710_1.txt and - are identical
Files test/330330_0800_1.txt and - are identical
Files test/330331_0800_1.txt and - are identical
== import tr2
== summaries
Files test/100100_0300_2.txt and - are identical
Files test/100100_0710_2.txt and - are identical
Files test/101010_2010_2.txt and - are identical
Files test/111300_0710_2.txt and - are identical
Files test/111323_0710_2.txt and - are identical
Files test/330330_0800_2.txt and - are identical
Files test/330331_0800_2.txt and - are identical
Files test/330335_0800_2.txt and - are identical
```
